# 用户导航功能使用指南

## 功能概述

现在系统已经实现了完整的用户登录状态管理：

### ✅ 已实现的功能

1. **登录后跳转到首页**：
   - 用户登录成功后统一跳转到系统主页面
   - 不再直接跳转到用户中心

2. **右上角用户状态显示**：
   - **未登录**：显示"登录"和"注册"按钮
   - **已登录**：显示用户头像、姓名和下拉菜单

3. **用户下拉菜单**：
   - 用户中心
   - 个人资料
   - 援助记录
   - 退出登录

4. **退出登录功能**：
   - 清除本地存储的用户信息
   - 跳转回首页
   - 重新显示登录/注册按钮

## 使用流程

### 1. 用户登录
1. 访问 `http://localhost:5173/login`
2. 输入用户名和密码
3. 选择用户角色
4. 点击登录按钮
5. **登录成功后自动跳转到首页**

### 2. 首页导航
- 登录后，右上角显示用户头像和姓名
- 点击头像可以展开下拉菜单
- 可以访问用户中心、个人资料、援助记录
- 可以退出登录

### 3. 访问帮扶功能
- 登录后可以正常访问：
  - 帮扶项目：`/projects`
  - 儿童列表：`/children`
  - 爱心故事：`/articles`

### 4. 退出登录
- 点击右上角头像
- 选择"退出登录"
- 自动跳转到首页
- 重新显示登录/注册按钮

## 技术实现

### 1. 认证工具函数
创建了 `src/utils/auth.ts` 文件，提供：
- `isLoggedIn()`: 检查登录状态
- `getUserInfo()`: 获取用户信息
- `getUserInitials()`: 获取用户头像字母
- `logout()`: 退出登录

### 2. 首页状态管理
- 使用 Vue 3 Composition API
- 响应式用户状态管理
- 自动检测登录状态变化

### 3. 路由跳转逻辑
- 登录成功后统一跳转到首页
- 退出登录后跳转到首页
- 保持用户友好的导航体验

## 测试步骤

1. **启动开发服务器**：
   ```bash
   npm run dev
   ```

2. **测试登录功能**：
   - 访问登录页面
   - 输入测试账号
   - 验证跳转到首页

3. **测试用户菜单**：
   - 点击右上角头像
   - 验证下拉菜单显示
   - 测试各个菜单项

4. **测试退出登录**：
   - 点击"退出登录"
   - 验证跳转到首页
   - 验证显示登录/注册按钮

## 注意事项

1. **用户信息存储**：
   - Token 和用户信息存储在 localStorage
   - 页面刷新后状态会保持

2. **角色权限**：
   - 不同角色可以访问不同的功能
   - 用户中心根据角色显示不同内容

3. **安全考虑**：
   - Token 过期后需要重新登录
   - 退出登录会清除所有本地数据

## 下一步优化

1. **添加用户头像上传功能**
2. **实现记住登录状态**
3. **添加用户消息通知**
4. **优化移动端显示效果**

现在用户可以正常登录、导航和退出登录了！ 